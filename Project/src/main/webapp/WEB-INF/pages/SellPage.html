<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Sell</title>
<link rel="stylesheet" type="text/css" media="all"
	href="../css/mystyle.css" th:href="@{/css/mystyle.css}" />
</head>

<body>

	<div class="formdiv">
		<!--  Top buttons  -->
		<div class=top-buttons>
			<!-- HomePage link-->
			<a th:href="@{/home}" class="button-link">
				<svg class="icon" viewBox="0 0 24 24">
					<path d="m15 18-6-6 6-6" />
				</svg>
				
				<span>Home</span>
			</a>
			
			<a th:href="@{/logout}" class="button-link button-link-destructive">
				<svg class="icon" viewBox="0 0 24 24">
					<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
					<polyline points="16 17 21 12 16 7"/>
					<line x1="21" x2="9" y1="12" y2="12"/>
				</svg>
				
				<span>Logout</span>
			</a>
		</div>
		
		<!--  Title  -->
		<h1>Sell</h1>

		<!-- Auctions created by the User and not closed yet -->
		<div>
			<div class="title-with-image">			
				<svg class="icon" viewBox="0 0 24 24">
					<line x1="10" x2="14" y1="2" y2="2"/>
					<line x1="12" x2="15" y1="14" y2="11"/>
					<circle cx="12" cy="14" r="8"/>
				</svg>
					
				<div class="text-group">	
					<h2 class="section-title">Open Auctions</h2>
					<p class="header-description">See all the Auctions you have created that are still open</p>
				</div>
			</div>
	
	
			<div class=container>			
				
				<div th:if="${openAuctions != null and !openAuctions.isEmpty()}">
	    			<ul>
	        			<li th:each="auction : ${openAuctions}">
	            			<div>
	                			<div class="auction-header">
	                    			<div>
	                        			<p class="auction-detail">Auction #<span th:text="${auction.id}">1</span></p>
	
	                        			<p class="auction-detail auction-detail-secondary">Current Highest Bid:</p>
	
	                        			<div th:if="${auction.highestBid != null}" class="offer-pill">
	                            			<svg class="icon" viewBox="0 0 24 24">
	                                			<circle cx="12" cy="12" r="10"/>
	                                			<path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"/>
	                                			<path d="M12 18V6"/>
	                           				</svg>
	                           			|	<p th:text="${auction.highestBid + '€'}">500€</p>
	                        			</div>
	
	                        			<div th:if="${auction.highestBid == null}" class="offer-pill offer-pill-no-offers">
	                            			<svg class="icon" viewBox="0 0 24 24">
	                                			<circle cx="12" cy="12" r="10"/>
	                                			<path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"/>
	                                			<path d="M12 18V6"/>
	                           				</svg>
	                            			<p>No offers yet...</p>
	                        			</div>
	                    			</div>
	
	                    			<div>
	                        			<div class="closed-status-container">
	                            			<div th:if="${auction.isSold}" class="closed-status closed-status-closed">
	                                			<svg class="icon" viewBox="0 0 24 24">
	                                			    <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
	                                    			<path d="M7 11V7a5 5 0 0 1 10 0v4"/>
	                                			</svg>
	                                			<p>Closed</p>
	                            			</div>
	
	                            			<div th:unless="${auction.isSold}" class="closed-status closed-status-open">
	                                			<svg class="icon" viewBox="0 0 24 24">
	                                    			<rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
	                                    			<path d="M7 11V7a5 5 0 0 1 9.9-1"/>
	                                			</svg>
	                                			<p>Open</p>
	                           				</div>
	                        			</div>
	
	                        			<div class="remaining-time-container">
	                            			<p class="auction-detail auction-detail-secondary">Remaining time:</p>
	
	                            			<div class="remaining-time-pill">
	                                			<svg class="icon" viewBox="0 0 24 24">
	                                    			<path d="M5 22h14"/>
	                                    			<path d="M5 2h14"/>
	                                    			<path d="M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"/>
	                                    			<path d="M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"/>
	                                			</svg>
	                                			<p th:text="${auction.remainingTime}">1d, 2h, 35min</p>
	                            			</div>
	                        			</div>
	                    			</div>
	                			</div>
	
	                			<ul class="item-list">
	                    			<li th:each="item : ${auction.items}" class="item-container">
	                    				<!--  Image  -->
	                        			<div class="text-group">
											<!-- If image exists -->
											<img th:if="${item.image != null}"
											     th:src="@{/{file}(file=${item.image.filePath})}"
											     alt="Item Image"
											     class="item-image" />
											
											<!-- If image missing -->
											<img th:unless="${item.image != null}"
											     th:src="@{/images/placeholder.svg}"
											     alt="No Image Available"
											     class="item-image" />
	
											                 			
	                            			<p class="item-detail" th:text="${item.itemName}">Example Item Name</p>
	                            			<p class="item-detail-tertiary">Item #<span th:text="${item.id}">1</span></p>
	                        			</div>
	                   				</li>
	                			</ul>
	
	                			<div th:if="${auction.items == null or auction.items.isEmpty()}">
	                    			<p class="no-element-in-list">No items in this auction</p>
	                			</div>
	         				</div>
	        			</li>
	    			</ul>
				</div>
	
				<div th:unless="${openAuctions != null and !openAuctions.isEmpty()}">
	    			<p class="no-element-in-list">No open auctions available</p>
				</div>
			</div>
		</div>
		
		<div>
			<!-- Auctions created by the User and closed -->
			<div class="title-with-image">			
	    		<svg class="icon" viewBox="0 0 24 24">
	        		<path d="M10 2h4"/>
	        		<path d="M4.6 11a8 8 0 0 0 1.7 8.7 8 8 0 0 0 8.7 1.7"/>
	        		<path d="M7.4 7.4a8 8 0 0 1 10.3 1 8 8 0 0 1 .9 10.2"/>
	        		<path d="m2 2 20 20"/>
	        		<path d="M12 12v-2"/>
	    		</svg>
	    
	    		<div class="text-group">	
	        		<h2 class="section-title">Closed Auctions</h2>
	        		<p class="header-description">See all the Auctions you have created that are already closed</p>
	    		</div>
			</div>
	
			<div class="container">
			    <div th:if="${closedAuctions != null and !closedAuctions.isEmpty()}">
	        		<ul>
	            		<li th:each="auction : ${closedAuctions}">
	                		<div>
	                    		<p>
	                        		Auction #<span th:text="${auction.id}">1</span><br>
	                        		Base price: <span th:text="${auction.basePrice}">100</span> €<br>
	                        		Minimum increment: <span th:text="${auction.minIncrement}">10</span><br>
	                        		Closed at: <span th:text="${#dates.format(auction.closingDate, 'dd/MM/yyyy HH:mm')}">01/01/2025 12:00</span><br>
	                        		Seller: <span th:text="${auction.sellerUsername}">Seller Username</span>
	                    		</p>
	
	                    		<div th:if="${auction.isSold}">
	                       			 <p>
	                        		    Bought by: <span th:text="${auction.buyerUsername}">Buyer Username</span><br>
	                            		Final price: <span th:text="${auction.finalPrice}">250</span><br>
	                            		Delivered to: <span th:text="${auction.buyerAddress}">Buyer Address</span>
	                        		</p>
	                    		</div>
	
	                    		<div th:unless="${auction.isSold}">
	                        		<p>Not sold</p>
	                    		</div>
	                		</div>
	            		</li>
	        		</ul>
	    		</div>
	
	    		<div th:unless="${closedAuctions != null and !closedAuctions.isEmpty()}">
	        		<p class="no-element-in-list">No closed auctions available</p>
	    		</div>
			</div>
		</div>
		
		<!-- TODO: Add Forms -->
		
		
		
		
	</div>
</body>
</html>