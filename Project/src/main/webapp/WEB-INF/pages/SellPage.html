<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Sell</title>
<link rel="stylesheet" type="text/css" media="all"
	href="../css/mystyle.css" th:href="@{/css/mystyle.css}" />
</head>

<body>

	<div class="formdiv">
		<!--  Top buttons  -->
		<div class=top-buttons>
			<!-- HomePage link-->
			<a th:href="@{/home}" class="button-link">
				<svg class="icon" viewBox="0 0 24 24">
					<path d="m15 18-6-6 6-6" />
				</svg>
				
				<span>Home</span>
			</a>
			
			<a th:href="@{/logout}" class="button-link">
				<svg class="icon" viewBox="0 0 24 24">
					<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
					<polyline points="16 17 21 12 16 7"/>
					<line x1="21" x2="9" y1="12" y2="12"/>
				</svg>
				
				<span>Logout</span>
			</a>
		</div>
		
		<!--  Title  -->
		<h1>Sell</h1>

		<!-- Auctions created by the User and not closed yet -->
		<div class="title-with-image">			
			<svg class="icon" viewBox="0 0 24 24">
				<line x1="10" x2="14" y1="2" y2="2"/>
				<line x1="12" x2="15" y1="14" y2="11"/>
				<circle cx="12" cy="14" r="8"/>
			</svg>
				
			<div class="text-group">	
				<h2 class="section-title">Open Auctions</h2>
				<p class="header-description">See all the Auctions you have created that are still open</p>
			</div>
		</div>


		<div th:if="${openAuctions != null and !openAuctions.isEmpty()}">
			<ul>
				<li th:each="auction : ${openAuctions}">
    				<p>
        				Auction #<span th:text="${auction.id}">1</span><br>
        				Current Highest Bid: <span th:text="${auction.highestBid != null ? auction.highestBid : 'No offers yet'}">No offers yet</span><br>
        				Remaining time (since login): <span th:text="${auction.remainingTime}">1 day, 2 hours, 35 minutes</span><br>
    				</p>

    				<!-- Items in Auction -->
    				<div th:if="${auction.items != null and !auction.items.isEmpty()}">
        				<ul>
            				<li th:each="item: ${auction.items}">
                				<p>
                    				Item #<span th:text="${item.id}">1</span><br>
                    				<span th:text="${item.itemName}">Item Name</span>
                				</p>
            				</li>
        				</ul>
    				</div>

    				<div th:unless="${auction.items != null && !auction.items.isEmpty()}">
        				<p>No items in this Auction</p>
    				</div>
				</li>
			</ul>
		</div>

		<div th:unless="${openAuctions != null and !openAuctions.isEmpty()}">
			<!-- If the list is null or empty, show this message -->
			<p>No open auctions available.</p>
		</div>

		<br>

		<!-- Auctions created by the User and closed -->
		<div class="title-with-image">			
			<svg class="icon" viewBox="0 0 24 24">
				<path d="M10 2h4"/>
				<path d="M4.6 11a8 8 0 0 0 1.7 8.7 8 8 0 0 0 8.7 1.7"/>
				<path d="M7.4 7.4a8 8 0 0 1 10.3 1 8 8 0 0 1 .9 10.2"/>
				<path d="m2 2 20 20"/>
				<path d="M12 12v-2"/>
			</svg>
				
			<div class="text-group">	
				<h2 class="section-title">Closed Auctions</h2>
				<p class="header-description">See all the Auctions you have created that are already closed</p>
			</div>
		</div>
				
		<div th:if="${closedAuctions != null and !closedAuctions.isEmpty()}">
			<ul>
				<li th:each="auction : ${closedAuctions}">
					<p>
						Auction #<span th:text="${auction.id}">1</span><br> Base
						price: <span th:text="${auction.basePrice}">100</span> € <br>
						Minimum increment: <span th:text="${auction.minIncrement}">10</span>
						€ <br> Closed at: <span
							th:text="${#dates.format(auction.closingDate, 'dd/MM/yyyy HH:mm')}">01/01/2025
							23:59</span> <br> Sold by: <span
							th:text="${auction.sellerUsername}">Seller Username</span>
					<div th:if="${auction.isSold}">
						<!-- Sold -> Display the Buyer's Info -->
						Bought by: <span th:text="${auction.buyerUsername}">Buyer
							Username</span> <br> Final price: <span
							th:text="${auction.finalPrice}">250</span> € <br>
						Delivered to: <span th:text="${auction.buyerAddress}">Buyer
							Address</span>
					</div>

					<div th:unless="${auction.isSold}">
						<!-- Not sold -->
						<p>Not sold</p>
					</div>
					</p>
					<hr>
				</li>
			</ul>
		</div>

		<div
			th:unless="${closedAuctions != null and !closedAuctions.isEmpty()}">
			<!-- If the list is null or empty, show this message -->
			<p>No closed auctions available.</p>
		</div>

		<!-- TODO: Add Forms -->
	</div>
</body>
</html>