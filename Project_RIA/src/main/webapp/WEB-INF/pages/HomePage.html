<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Home Page</title>
<link rel="stylesheet" type="text/css" media="all" href="css/mystyle.css" />
<script type="module" src="js/home.js" defer></script>
</head>

<body>

	<!-- Logout button-->
	<div class="top-buttons">
		<div></div>

		<a href="/Project_TIW_RIA/logout" class="button-link button-link-destructive">
			<svg class="icon" viewbox="0 0 24 24">
				<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
				<polyline points="16 17 21 12 16 7"/>
				<line x1="21" x2="9" y1="12" y2="12"/>
			</svg>

			<span>Logout</span>
		</a>
	</div>

	<h1 id="welcomeText">Welcome!</h1>

	

	<!-- Tab Bar component, used to change which page is currently selected and displayed -->
	<div class="pill-tabbar">
		<!-- Visual indication of which page is currently selected -->
  		<div class="pill-indicator"></div>
  	
		<!-- Sell Page -->
		<button class="pill-tab active" data-tab="sellPage">Sell</button>
		<!-- Buy Page -->
  		<button class="pill-tab" data-tab="buyPage">Buy</button>
	</div>

	<!-- Sell Page, whose visibility is controlled by the TabBar above -->
	<div id="sellPage" class="tab-content formdiv fade-scale-in">
		<!-- Title -->
		 <h1>Sell</h1>

		 <!-- Auctions created by the User and not closed yet -->
		  <div>
			<div class="title-with-image">
				<svg class="icon" viewBox="0 0 24 24">
					<line x1="10" x2="14" y1="2" y2="2"/>
					<line x1="12" x2="15" y1="14" y2="11"/>
					<circle cx="12" cy="14" r="8"/>
				</svg>
					
				<div class="text-group">
					<h2 class="section-title">Open Auctions</h2>
					<p class="header-description">See all the Auctions you have created that are still open</p>
				</div>
			</div>

			<div class="container">
				<div id="openAuctionsContainer">
					<ul id="openAuctionsList"></ul>
				</div>

				<!-- Default text: no auctions -->
				<p id="noOpenAuctionsText" class="no-element-in-list">No open auctions available</p>
			</div>

		  </div>

		  <!-- Auctions created by the User and already closed -->
		  <div>
			<div class="title-with-image">
				<svg class="icon" viewBox="0 0 24 24">
		            <path d="M10 2h4"/>
		            <path d="M4.6 11a8 8 0 0 0 1.7 8.7 8 8 0 0 0 8.7 1.7"/>
		            <path d="M7.4 7.4a8 8 0 0 1 10.3 1 8 8 0 0 1 .9 10.2"/>
		            <path d="m2 2 20 20"/>
		            <path d="M12 12v-2"/>
		        </svg>
		
		        <div class="text-group">	
		            <h2 class="section-title">Closed Auctions</h2>
		            <p class="header-description">See all the Auctions you have created that are already closed</p>
		        </div>
			</div>

			<div class="container">
				<div id="closedAuctionsContainer">
					<ul id="closedAuctionsList"></ul>
				</div>

				<!-- Default text: no auctions -->
				 <p id="noClosedAuctionsText" class="no-element-in-list">No closed auctions available</p>
			</div>
		</div>

		  <!-- Item creation form -->
		  <div>
			<!-- Title -->
			<div>
				<div class="title-with-image">
					<svg class="icon" viewBox="0 0 24 24">
				    	<path d="M12 8v8"/>
				    	<path d="M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41L13.7 2.71a2.41 2.41 0 0 0-3.41 0z"/>
				    	<path d="M8 12h8"/>
			    	</svg>
				    
				    <div class="text-group">	
				        <h2 class="subsection-title">New Item</h2>
				        <p class="header-description">Create a new Item to sell</p>
				    </div>
				</div>

				<div class="container">
					<!-- Error message -->
					 <p id="itemCreationFormErrorMessage" class="error"></p>

					 <form id="itemCreationForm" method="POST" action="/Project_TIW_RIA/CreateItem" enctype="multipart/form-data">
						<div class="form-columns">
							<!-- LEFT HALF: Text Entries -->
							 <div class="form-left">
								<!-- Item Name -->
								 <label for="itemName">Item Name:</label>
								 <input type="text" name="itemName" id="itemName" placeholder="Name" required minlength="1" maxlength="255">

								 <!-- Description -->
								  <label for="itemDescription">Description:</label>
								  <textarea name="itemDescription" id="itemDescription" placeholder="Description" rows="4" required maxlength="1023"></textarea>

								  <!-- Price -->
								   <label for="price">Price:</label>
								   <input type="number" name="price" id="price" placeholder="___ €" required min="1" step="1">
							 </div>

							 <!-- RIGHT HALF: Image Upload -->
							  <div class="form-right">
								<div class="form-group">
									<input type="file" name="image" id="image" accept="image/*" required class="hidden-file-input">
									<label for="image" class="custom-file-upload">
										<svg class="icon upload-icon" viewBox="0 0 24 24">
											<path d="M16 5h6"/>
											<path d="M19 2v6"/>
											<path d="M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5"/>
											<path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
											<circle cx="9" cy="9" r="2"/>
										</svg>
										<p>Click to upload image</p>
									</label>
								</div>
							  </div>
						</div>

						<!-- Submit -->
						 <button type="submit" class="button-primary">
					    	<svg class="icon" viewBox="0 0 24 24">
						    	<path d="M12 8v8"/>
						    	<path d="M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41L13.7 2.71a2.41 2.41 0 0 0-3.41 0z"/>
						    	<path d="M8 12h8"/>
					    	</svg>
					    	
					    	<p>Create Item</p>
					    </button>
					 </form>
				</div>
			</div>
		  </div>

		  <!-- Auction Creation Form -->
		  <div>
			<!-- Title -->
			 <div>
				<div class="title-with-image">
					<svg class="icon" viewBox="0 0 24 24">
				    	<path d="M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"/>
				    	<line x1="12" x2="12" y1="8" y2="16"/>
				    	<line x1="8" x2="16" y1="12" y2="12"/>
				    </svg>
				    
				    <div class="text-group">	
				        <h2 class="subsection-title">New Auction</h2>
				        <p class="header-description">Create a new Auction and sell your Items</p>
				    </div>
				</div>

				<div class="container">
					<!-- Error message -->
					 <p id="auctionCreationFormErrorMessage" class="error"></p>

					 <form id="auctionCreationForm" method="POST" action="/Project_TIW_RIA/CreateAuction">
						<div class="form-columns-packed">
							<!-- LEFT HALF: Minimum Increment -->
							 <div class="form-column">
								<!-- Minimum Increment -->
								 <label for="minIncrement">Minimum Increment (€):</label>
								 <input type="number" name="minIncrement" id="minIncrement" placeholder="___ €" required min="1" step="1">
							 </div>

							 <!-- RIGHT HALF: Closing Date -->
							 <div class="form-column">
								<!-- Closing Date -->
								 <label for="closingDate">Closing Date:</label>
								 <input type="datetime-local" name="closingDate" id="closingDate" required>
							 </div>
						</div>

						<!-- Select Items -->
						 <label>Select Items for this Auction:</label>
						 <ul id="auctionCreationItemList" class="item-list">
							<!-- Available Items go here -->
						 </ul>

						 <!-- Default text: No items available -->
						<p id="auctionCreationNoItemsText" class="no-element-in-list">No available items. You need at least one to create an auction.</p>

						<!-- Submit -->
						<button type="submit" class="button-primary"
						        th:disabled="${#lists.isEmpty(availableItems)}"
						        th:classappend="${#lists.isEmpty(availableItems)} ? ' disabled-button' : ''">
						    
						    <svg class="icon" viewBox="0 0 24 24">
						    	<path d="M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"/>
						    	<line x1="12" x2="12" y1="8" y2="16"/>
						    	<line x1="8" x2="16" y1="12" y2="12"/>
						    </svg>
						    
						    <p>Create Auction</p>
						</button>
					 </form>
				</div>
			 </div>
		  </div>
	</div>

	<!-- Buy Page, whose visibility is controlled by the TabBar above -->
	<div id="buyPage" class="tab-content formdiv fade-scale-in">
		<!-- Title -->
		 <h1>Buy</h1>

		 <!-- Search Field -->
		 <div>
			<form class="search-form-compact">
				<label for="query">Search</label>

				<div class="search-inline-row">
					<input id="query" type="text" name="query" placeholder="Search Items by keywords" required/>

					<button type="submit" class="button-primary">
						<svg class="icon" viewBox="0 0 24 24">
				    		<path d="m21 21-4.34-4.34"/>
				    		<circle cx="11" cy="11" r="8"/>
			    		</svg>
				    	<p>Search</p>
					</button>
				</div>
			</form>
		</div>

		<!-- Search Results -->
		<div id="searchResultsContainer">
			<div class="title-with-image">
				<svg class="icon" viewBox="0 0 24 24">
					<path d="M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"/>
					<path d="M5 21h14"/>
				</svg>
					
				<div class="text-group">	
					<h2 class="section-title">Search Results</h2>
					<p class="header-description">See all the Auctions we have found matching your request</p>
				</div>
			</div>

			<div class="container">
				<div id="searchResultsContainer">
					<ul id="searchResultsList"></ul>
				</div>

				<!-- Default Text: no auctions from Search Results -->
				<p id="searchResultsNoAuctionText" class="no-element-in-list">No results</p>

			</div>
		</div>

		<!-- Auctions won by User -->
		<div>
			<div class="title-with-image">			
				<svg class="icon" viewBox="0 0 24 24">
					<path d="M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"/>
					<path d="M5 21h14"/>
				</svg>
					
				<div class="text-group">	
					<h2 class="section-title">Won Auctions</h2>
					<p class="header-description">See all the Auctions you have won</p>
				</div>
			</div>
			
			<div class="container">
				<div id="wonAuctionsContainer">
					<ul id="wonAuctionsList"></ul>
				</div>

				<!-- Default Text: no auctions available -->
				 <p id="noWonAuctionsText" class="no-element-in-list">No won auctions available</p>
			</div>
		</div>

	</div>
	

	<!-- Popup window -->
	<div id="popup-overlay" class="popup-overlay">
		<div class="popup-content fade-scale-in">
			<button id="popup-close" class="popup-close button-link button-link-destructive">&times;</button>
			
			<!-- Auction Details -->
			 <div class="formcard-wrapper">
				<div class="form-columns">
					
					<!-- Auction info and content -->
					<div class="formcard-wide">
						<!-- Title -->
						<h1 id="selectedAuctionTitle"></h1>

						<div>
							<div class="auction-header">
								<div>
									<!-- Final Price or Current Highest Bid-->
									<p id="selectedAuctionFinalPrice" class="auction-detail auction-detail-secondary">Final Price:</p>
									<p id="selectedAuctionHighestBid" class="auction-detail auction-detail-secondary">Current Highest Bid:</p>

									<div id="selectedAuctionPricePill" class="offer-pill">
										<svg class="icon" viewBox="0 0 24 24">
											<circle cx="12" cy="12" r="10"/>
											<path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"/>
											<path d="M12 18V6"/>
										</svg>

										<p id="selectedAuctionPrice"></p>
									</div>

									<div id="selectedAuctionNoOffersPill" class="offer-pill offer-pill-no-offers">
										<svg class="icon" viewBox="0 0 24 24">
											<circle cx="12" cy="12" r="10"/>
											<path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"/>
											<path d="M12 18V6"/>
									</svg>

										<p>No offers yet...</p>
									</div>

									<!-- Buyer User's data -->
									<div id="selectedAuctionBuyerInfoBox" class="auction-header">
										<div class="text-group">
											<p class="auction-detail auction-detail-secondary">Bought by</p>

											<div class="title-with-image">
												<svg class="icon" viewBox="0 0 24 24">
													<circle cx="12" cy="12" r="10"/>
													<circle cx="12" cy="10" r="3"/>
													<path d="M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"/>
												</svg>

												<p id="selectedAuctionBuyerUsername" class="auction-detail"></p>
											</div>

											<p class="auction-detail-secondary">Address: <span id="selectedAuctionBuyerAddress"></span></p>
										</div>
									</div>

									<!-- Other Auction Data -->
									<div class="auction-header">
										<div>
											<p class="auction-detail auction-detail-secondary">Base price: <span id="selectedAuctionBasePrice"></span>€</p>

											<p class="auction-detail auction-detail-secondary">Minimum increment: <span id="selectedAuctionMinIncrement""></span>€</p>

											<p class="auction-detail auction-detail-secondary">Sold by <span id="selectedAuctionSellerUsername"></span></p>
										</div>
									</div>
								</div>

								<!-- Open/Closed Status -->
								<div>
									<div class="closed-status-container">
										<!-- Closed -->
										<div id="selectedAuctionClosedPill" class="closed-status closed-status-closed">
											<svg class="icon" viewBox="0 0 24 24">
												<rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
												<path d="M7 11V7a5 5 0 0 1 10 0v4"/>
											</svg>

											<p>Closed</p>
										</div>

										<!-- Open -->
										<div id="selectedAuctionOpenPill" class="closed-status closed-status-open">
											<svg class="icon" viewBox="0 0 24 24">
												<rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
												<path d="M7 11V7a5 5 0 0 1 9.9-1"/>
											</svg>

											<p>Open</p>
										</div>
									</div>

									<!-- Remaining Time -->
									<div>
										<div id="selectedAuctionRemainingTimePill" class="remaining-time-container">
											<p class="auction-detail auction-detail-secondary">Remaining time:</p>

											<div id="selectedAuctionRemainingTimePill" class="remaining-time-pill">
												<svg class="icon" viewBox="0 0 24 24">
													<path d="M5 22h14"/>
													<path d="M5 2h14"/>
													<path d="M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"/>
													<path d="M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"/>
												</svg>

												<p id="selectedAuctionRemainingTime"></p>
											</div>

											<p id="selectedAuctionClosingDateTitle-Open" class="auction-detail auction-detail-secondary">Open until:</p>
											<p id="selectedAuctionClosingDateTitle-Closed" class="auction-detail auction-detail-secondary">Closed on:</p>
											<p id="selectedAuctionClosingDate" class="auction-detail auction-detail-secondary"></p>
										</div>
										
									</div>
								</div>
							</div>

							<!-- Items -->
							<div class="auction-header">
								<div class="title-with-image">
									<svg class="icon" viewBox="0 0 24 24">
										<path d="M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z"/>
										<path d="m7 16.5-4.74-2.85"/>
										<path d="m7 16.5 5-3"/>
										<path d="M7 16.5v5.17"/>
										<path d="M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z"/>
										<path d="m17 16.5-5-3"/>
										<path d="m17 16.5 4.74-2.85"/>
										<path d="M17 16.5v5.17"/>
										<path d="M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z"/>
										<path d="M12 8 7.26 5.15"/>
										<path d="m12 8 4.74-2.85"/>
										<path d="M12 13.5V8"/>
									</svg>
									
									<div class="text-group">	
										<h2 class="subsection-title">Items</h2>
										<p class="header-description">Products included in this closed auction</p>
									</div>
								</div>
							</div>

							<div class="item-scrollview">
								<ul id="selectedAuctionItemList" class="item-list-large">
									<!-- The items inside the Auction -->
								</ul>

								<!-- Default Loading Text -->
								<div>
									<p id="selectedAuctionNoItemsMessage" class="no-element-in-list">No items in this auction...</p>
								</div>
							</div>
						</div>

						<!-- Close Auction Button -->
						<div class="centered">
							<button id="selectedAuctionCloseButton" class="button-primary destructive disabled-button" disabled>
								<svg class="icon" viewBox="0 0 24 24">
									<path d="m11 17 2 2a1 1 0 1 0 3-3"/>
									<path d="m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4"/>
									<path d="m21 3 1 11h-2"/>
									<path d="M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3"/>
									<path d="M3 4h8"/>
								</svg>

								<p>Close Auction</p>
							</button>
						</div>
					</div>

					<!-- Offers to the Auction -->
					<div class="formcard-narrow slide-in-right">
						<div class="auction-header">
							<div class="title-with-image">
								<svg class="icon" viewBox="0 0 24 24">
									<path d="M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17"/>
									<path d="m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9"/>
									<path d="m2 16 6 6"/>
									<circle cx="16" cy="9" r="2.9"/>
									<circle cx="6" cy="5" r="3"/>
								</svg>
								
								<div class="text-group">	
									<h2 class="subsection-title">Offers</h2>
									<p class="header-description">Offers made by the Users</p>
								</div>
							</div>
						</div>

						<div id="selectedAuctionOfferScrollview" class="offer-scrollview">
							<!-- List of Offers -->
							 <ul id="selectedAuctionOfferList" class="offer-list">
								<!-- Offer go here -->
							 </ul>
						</div>

						<div id="selectedAuctionOfferEmptyContainer" class="offer-empty-container">
							<p class="no-element-in-list">No offers yet...</p>
						</div>

						<!-- Offer overlay -->
						 <div id="selectedAuctionOfferOverlay" class="offer-overlay">
							<div>
								<!-- Error message -->
								 <p id="selectedAuction-OfferError" class="error"></p>

								 <p class="auction-detail-secondary">Min Increment: <span id="selectedAuction-OfferMinIncrement"></span>€</p>

								 <form id="selectedAuction-MakeOfferForm" class="offer-form" method="POST" action="/Project_TIW_RIA/MakeOffer">
									<input type="number" name="offer" placeholder="Place your offer..." required/>

									<button type="submit" class="button-primary">
										<svg class="icon" viewBox="0 0 24 24">
											<path d="M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"/>
											<path d="m21.854 2.147-10.94 10.939"/>
										</svg>
										
										<p>Send</p>
									</button>
								 </form>
							</div>
						 </div>
					</div>

				</div>
			 </div>

		</div>
	</div>



	<div class="popup-overlay-small">
		<div class="popup-vertical-container">
			<!-- The success message popup -->
			<div id="successMessagePopup" class=" popup-message-container popup-success popup-message">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon-large icon-large-success">
					<circle cx="12" cy="12" r="10"/>
					<path d="m9 12 2 2 4-4"/>
				</svg>
				
				<div class="text-group-popup">
					<p id="successStatusCode" class="success-type-popup">Success</p>
					<p id="successMessage" class="success-popup">Task executed successfully</p>
				</div>
			</div>
			
			<!-- The error message popup -->
			<div id="errorMessagePopup" class="popup-message-container popup-error popup-message">
				<svg viewBox="0 0 24 24" class="icon-large icon-large-error">
					<circle cx="12" cy="12" r="10"/>
					<path d="m15 9-6 6"/>
					<path d="m9 9 6 6"/>
				</svg>
				
				<div class="text-group-popup">
					<p id="errorStatusCode" class="error-type-popup">Error</p>
					<p id="errorMessage" class="error-popup">Something went wrong</p>
				</div>
			</div>
	
		</div>
	</div>

</body>
</html>